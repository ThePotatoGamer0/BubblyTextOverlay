<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS Overlay</title>
    
    <style>
        /* Basic styling to make the overlay transparent and position text */
        body {
            background-color: rgba(0, 0, 0, 0); /* Essential for transparency in OBS */
            margin: 0;
            padding: 40px; /* Added more padding for bounce room */
            font-family: 'Inter', sans-serif; /* A nice clean font */
            color: white;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            overflow: hidden; /* Prevents scrollbars during animation */
        }

        #animated-text {
            font-size: 80px;
            font-weight: bold;
            /* Using flexbox to handle the letter spacing */
            display: flex;
            flex-wrap: wrap;
        }

        /* Style for each individual letter span */
        #animated-text span {
            display: inline-block; /* Allows transforms to be applied */
            min-width: 0.3em; /* Ensures spaces have width */
        }
    </style>
</head>
<body>

    <!-- This div is now empty; JavaScript will fill it with text from the URL. -->
    <div id="animated-text"></div>

    <script type="module">
        // Import the functions we need directly from the CDN
        import { animate, stagger } from "https://cdn.jsdelivr.net/npm/motion@latest/+esm";

        // --- Step 1: Get text from the URL ---
        const urlParams = new URLSearchParams(window.location.search);
        // Look for a parameter named 'text'. If it's not there, use a default.
        const dynamicText = urlParams.get('text') || "Starting Soon";


        // --- Step 2: Split the text into individual letter spans ---
        const textContainer = document.querySelector('#animated-text');
        // Set the container's text from our URL parameter
        textContainer.textContent = dynamicText; 
        
        // Now, take that text and split it into spans for the animation
        const originalText = textContainer.textContent;
        textContainer.textContent = ''; 

        originalText.split('').forEach(char => {
            const span = document.createElement('span');
            span.innerHTML = char === ' ' ? '&nbsp;' : char;
            textContainer.appendChild(span);
        });


        // --- Step 3: Animate the new spans with a bounce effect ---
        const spans = document.querySelectorAll('#animated-text span');

        animate(
            spans,
            {
                // Keyframes for a bounce: start at 0, go up, and back to 0
                y: ["0%", "-40%", "0%"]
            },
            {
                duration: 1.5,
                // The stagger function creates the wave effect
                delay: stagger(0.05),
                // Make the animation loop forever
                repeat: Infinity,
                easing: "ease-in-out"
            }
        );
    </script>
</body>
</html>

